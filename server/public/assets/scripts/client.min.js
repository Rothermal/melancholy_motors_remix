var myApp=angular.module("myApp",["ngRoute","ngAnimate","ui.bootstrap","smart-table"]);myApp.config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"assets/views/templates/home.html",controller:"HomeController"}).when("/addcustomer",{templateUrl:"assets/views/templates/addcustomer.html",controller:"CustomerController"}).when("/addrepair",{templateUrl:"assets/views/templates/addrepair.html",controller:"RepairController"}).when("/addvehicle",{templateUrl:"assets/views/templates/addvehicle.html",controller:"VehicleController"}).when("/addparts",{templateUrl:"assets/views/templates/addParts.html",controller:"PartsController"}).when("/register",{templateUrl:"assets/views/templates/register.html",controller:"LoginController"}).when("/login",{templateUrl:"assets/views/templates/login.html",controller:"LoginController"}).otherwise({redirectTo:"/"}),b.html5Mode(!0)}]),myApp.controller("CustomerController",["$scope","CustomerService",function(a,b){var c=b;a.test=c.test,a.title="This is the Customer Controller",a.customer={},a.newCustomer=function(b){console.log(b),c.postCustomer(b),a.customer={}}}]),myApp.controller("HomeController",["$scope","$http","$filter","$uibModal","CustomerService","HomeService","PartsService","VehicleService",function(a,b,c,d,e,f,g,h){var i=e,j=f,k=g;a.repairTypeArray=["Starting and Charging","Engine Diagnostics","Engine Electrical","Engine Mechanical","Steering and Suspension","Heating and Cooling","Brakes","Maintenance"],a.vendorArray=["Napa","AutoZone","CarQuest","O'Reilly's","Advance","Factory","Dealership","Amazon","Ebay","Red Rooster"],a.test=i.test,a.title="",a.count=0,a.repairs=[],a.rowCollection=[],a.itemsByPage=15,a.part={},a.parts=[],a.deleteRepair=function(a){console.log("clicked",a),k.deletePart(a),i.deleteRepair(a)},a.getRepairs=function(){j.getRepairs(),a.repairs=j.repairs,a.count=a.repairs.length},a.getParts=function(b){console.log(b),k.getParts(b),a.parts=k.parts},a.postParts=function(b){console.log("clicked",b);var c={};c.name=b.part_name,c.description=b.partDescription,c.vendor=b.vendor,c.cost=b.cost,c.repair_id=b.id,k.postParts(c),a.repair.part_name="",a.repair.partDescription="",a.repair.vendor="",a.repair.cost=""},a.edit=function(a,b){console.log("open me a modal",b);d.open({animation:!0,templateUrl:"./assets/views/templates/editRepair.html",controller:"HomeController",size:a,keyboard:!0,backdrop:"static",resolve:{results:function(){return b}}})},a.getRepairs()}]),myApp.controller("LoginController",["$scope","CustomerService","LoginService",function(a,b,c){var d=b,e=c;a.User={},a.newUser={},a.test=d.test,a.title="Melancholy Motors . . .",a.login="Log in . . . to continue . . .",a.loginFunction=function(b){e.login(b),a.User={}},a.goRegister=function(){console.log("go register"),e.goRegister()},a.goLogin=function(){console.log("go login"),e.goLogin()},a.registerUser=function(b){console.log(b),b.password!==b.verifyPassword?(alert("passwords did not match, please try again"),a.newUser.password="",a.newUser.verifyPassword=""):(e.register(b),a.newUser={})}}]),myApp.controller("MainController",["$scope",function(a){a.header="Melancholy Motors . . . ."}]),myApp.controller("PartsController",["$scope","CustomerService","PartsService","HomeService",function(a,b,c,d){var e=d,f=c;a.vendorArray=["Napa","AutoZone","CarQuest","O'Reilly's","Advance","Factory","Dealership","Amazon","Ebay","Red Rooster"],a.part={},a.repairs=[],a.getRepairs=function(){e.getRepairs(),a.repairs=e.repairs},a.addPart=function(b,c){console.log("clicked",b,c),b.repair_id=c.id,f.postParts(b),a.part={}},a.getRepairs()}]),myApp.controller("RepairController",["$scope","CustomerService",function(a,b){function c(b){console.log("customer id",b),a.repair.customer_id=b}var d=b;a.repairTypeArray=["Starting and Charging","Engine Diagnostics","Engine Electrical","Engine Mechanical","Steering and Suspension","Heating and Cooling","Brakes","Maintenance"],a.customers=[],a.vehicles=[],a.repair={},a.test=d.test,a.title="This is the Repair Controller",a.getCustomers=function(){d.customerList()},a.getVehicles=function(a){console.log("clicked why are you undefined.",a),d.vehicleList(a.id),c(a.id)},a.setVehicleid=function(b){console.log("vehicle id",b),a.repair.vehicle_id=b},a.postRepair=function(b){console.log(b),d.postRepair(b),a.repair={}},a.customers=d.customers,a.vehicles=d.vehicles,a.getCustomers()}]),myApp.controller("SidenavController",["$scope",function(a){}]),myApp.controller("VehicleController",["$scope","CustomerService","VehicleService",function(a,b,c){var d=c,e=b;a.customers=[],a.years=[],a.makes=[],a.models=[],a.engines=[],a.vehicle={},a.getCustomers=function(){e.customerList()},a.saveCustomerId=function(b){a.makes=[],a.models=[],a.engines=[],a.vehicle.year="",console.log("customer id",b),a.vehicle.customer_id=b,console.log("$scoped id",a.vehicle.customer_id)},a.getYearsArray=function(){a.years=d.years},a.getMakesList=function(b){console.log("made it here",b),a.makes=[],a.models=[],a.engines=[],a.vehicle.make="",a.vehicle.model="",a.vehicle.engine="",d.getMakes(b),a.makes=d.makes},a.getModelsList=function(b){console.log("make in get model list",b),a.models=[],a.engines=[];for(var c=0;c<b.models.length;c++)a.models.push(b.models[c])},a.getEngine=function(b){console.log("in get engines",b),console.log("vehicle in get engine",a.vehicle),a.vehicle.model=b,a.engines=[],d.getEngines(a.vehicle),a.engines=d.engines},a.postVehicle=function(b){console.log(b),d.postVehicle(b),a.vehicle={}},a.customers=e.customers,a.getCustomers(),d.setYears(),a.getYearsArray()}]),console.log("grunt is watching"),myApp.factory("CustomerService",["$http",function(a){var b={},c={},d="",e=function(){a.get("/customers").then(function(a){console.log("customers in factory",a),b.object=a.data})},f=function(b){console.log("id in get vehicles",b),a.get("/vehicles/"+b).then(function(a){console.log("response in factory, vehicle list",a),c.object=a.data})},g=function(b){a.post("/repairs",b).then(function(a){console.log("response in post repairs factory should be repair id.",a)})},h=function(b){a.post("/customers",b).then(function(a){console.log("response in post customers factory, should be customer id.",a)})},i=function(b){a["delete"]("/repairs/"+b).then(function(a){console.log("response in factory, delete repair",a)})};return{test:d,customers:b,customerList:e,vehicles:c,vehicleList:f,postRepair:g,postCustomer:h,deleteRepair:i}}]),myApp.factory("HomeService",["$http",function(a){var b={},c=function(){a.get("/repairs").then(function(a){console.log("repairs in home factory get",a.data),b.object=a.data})},d=function(b){a.put("/repairs",b).then(function(a){console.log("updated repair in factory",a.data)})},e=function(b){console.log("before update",b),a.put("/customers",b).then(function(a){console.log("update customer in factory",a.data)})};return{getRepairs:c,repairs:b,updateRepair:d,updateCustomer:e}}]),myApp.factory("LoginService",["$http","$location","$window",function(a,b,c){test=" login injection is real";var d={},e=function(){c.location.href="/register"},f=function(){c.location.href="/"},g=function(d){a.post("/",d).then(function(a){console.log("response in factory login user.",a.data),a.data===!1?(console.log("it didnt work out"),b.path("/")):(console.log("redirect to index"),c.location.href="/index")})},h=function(b){a.post("/register",b).then(function(a){console.log("response in register user",a),c.location.href="/"})};return{test:test,login:g,register:h,user:d,goRegister:e,goLogin:f}}]),myApp.factory("PartsService",["$http",function(a){var b={},c=function(b){console.log(b),a.post("/parts",b).then(function(a){console.log(a)})},d=function(c){a.get("/parts/"+c).then(function(a){console.log(a.data),b.object=a.data})},e=function(b){a["delete"]("/parts/"+b).then(function(a){console.log("response in parts delete",a)})},f=function(a){for(var b=0;b<a.object.length;b++)g(a.object[b])},g=function(b){a.put("/parts",b).then(function(a){console.log("response in parts factory",a.data)})};return{postParts:c,getParts:d,parts:b,updatePart:f,deletePart:e}}]),myApp.factory("VehicleService",["$http",function(a){var b=new Date;b=b.getFullYear();var c=b,d=27,e=[],f={},g={},h=function(){for(;d>0;)e.push(c),c--,d--},i=function(b){a.get("/edmunds/"+b).then(function(a){console.log("response in vehicles api get make call",a.data.makes),f.object=a.data.makes})},j=function(b){console.log("vehicle in factory post call",b),a.post("/vehicles",b).then(function(a){console.log(a)})},k=function(b){console.log("vehicle in factory update call",b),a.put("/vehicles",b).then(function(a){console.log(a)})},l=function(b){console.log(b);var c=b.year,d=b.make.name,e=b.model.name;a.get("/edmunds/engine/"+c+"/"+d+"/"+e).then(function(a){console.log(a.data.styles),g.object=a.data.styles})};return{years:e,setYears:h,getMakes:i,makes:f,postVehicle:j,getEngines:l,engines:g,updateVehicle:k}}]);